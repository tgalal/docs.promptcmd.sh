import{_ as i,c as a,o,ah as n}from"./chunks/framework.BJEpWshW.js";const g=JSON.parse('{"title":"Configuration Resolution","description":"","frontmatter":{},"headers":[],"relativePath":"configuration/config-resolution.md","filePath":"configuration/config-resolution.md"}'),s={name:"configuration/config-resolution.md"};function r(t,e,l,d,p,c){return o(),a("div",null,[...e[0]||(e[0]=[n(`<h1 id="configuration-resolution" tabindex="-1">Configuration Resolution <a class="header-anchor" href="#configuration-resolution" aria-label="Permalink to “Configuration Resolution”">​</a></h1><p>While <a href="./">Model Resolution</a> maps to the direct model configuration as defined in <code>config.toml</code>, a final configuration is built from merging that with others layers of configuration from difference sources. This gives full flexibility over where every configuration key is defined.</p><h2 id="configuration-sources" tabindex="-1">Configuration Sources <a class="header-anchor" href="#configuration-sources" aria-label="Permalink to “Configuration Sources”">​</a></h2><p>The following configuration sources are supported, ordered by precedence (replace openai and variant as needed).</p><ol><li><strong>Defaults:</strong> These are hardcoded, (hopefully) sane default values for common provider properties.</li><li><strong>PROMPTCMD_PROVIDERS_*:</strong> Non-provider specific environment variables</li><li><strong>In <code>config.toml</code> under <code>[providers]</code>:</strong> Properties common across all providers.</li><li><strong>PROMPTCMD_OPENAI_*</strong>: Environment variables</li><li><strong>In <code>config.toml</code> under <code>[providers.openai]</code>:</strong> Properties for OpenAI provider</li><li><strong>PROMPTCMD_OPENAI_VARIANT_*</strong>: Environment variables for variant</li><li><strong>In <code>config.toml</code> under <code>[providers.openai.variant]</code>:</strong> Properties for variant</li><li><strong>In prompt file&#39;s frontmatter</strong>: Properties for variant</li><li><strong>Command line argument</strong>: E.g., <code>--config-temperature</code></li></ol><h2 id="general-strategy" tabindex="-1">General Strategy <a class="header-anchor" href="#general-strategy" aria-label="Permalink to “General Strategy”">​</a></h2><p>Generally, resolution adheres to the following principles:</p><ul><li>Specialized configurations override general ones (e.g., variant vs base provider)</li><li><code>config.toml</code> takes precedence over environment variable.</li><li>A frontmatter-defined configuration overrides both <code>config.toml</code> and any environment variable</li><li>A command-line configuration overrides everything.</li></ul><h3 id="example" tabindex="-1">Example <a class="header-anchor" href="#example" aria-label="Permalink to “Example”">​</a></h3><p>If <code>config.toml</code> contains:</p><div class="language-toml"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">providers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openai</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">temperature = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span></span></code></pre></div><p>and an environment variable <code>PROMPTCMD_OPENAI_TEMPERATURE=0.5</code> is set, the final configuration honors the <code>toml</code> value.</p><p>However, if additionally the prompt file contains:</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  temperature</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">---</span></span></code></pre></div><p>or the prompt is executed with <code>--config-temperature 0.2</code>, then these take precedence over everything else.</p><h2 id="groups" tabindex="-1">Groups <a class="header-anchor" href="#groups" aria-label="Permalink to “Groups”">​</a></h2><p>When <a href="./">Model Resolution</a> results in a group, the above configuration resolution strategy is applied to its members.</p>`,17)])])}const f=i(s,[["render",r]]);export{g as __pageData,f as default};
